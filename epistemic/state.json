{
  "project": "ELCS Framework",
  "version": "0.1.0-dev",
  "state_version": 11,
  "created": "2026-02-07T13:14:41Z",
  "last_updated": "2025-02-09T12:00:00Z",
  
  "assumptions": [
    {
      "id": "A1",
      "text": "AI agents (Claude Code, Cursor, Code-puppy, etc.) will respect bootstrap files like CLAUDE.md and .cursorrules",
      "confidence": 0.85,
      "status": "active",
      "evidence_for": ["E1"],
      "evidence_against": []
    },
    {
      "id": "A2", 
      "text": "File-based artifacts are more durable than agent memory for long-running projects",
      "confidence": 0.95,
      "status": "active",
      "evidence_for": ["E2"],
      "evidence_against": []
    },
    {
      "id": "A3",
      "text": "ELCS can be implemented progressively (Level 0 → Level 4) without breaking earlier levels",
      "confidence": 0.75,
      "status": "active",
      "evidence_for": [],
      "evidence_against": []
    },
    {
      "id": "A4",
      "text": "Unique terminology (WorkToken, CognitiveCone, etc.) will prevent confusion with other methodologies",
      "confidence": 0.70,
      "status": "active",
      "evidence_for": [],
      "evidence_against": []
    },
    {
      "id": "A5",
      "text": "The EAR methodology (used to build ELCS) is sufficient to complete this project",
      "confidence": 0.90,
      "status": "active",
      "evidence_for": ["E3"],
      "evidence_against": []
    },
    {
      "id": "A6",
      "text": "JSONL append is safe for concurrent agent writes to telemetry files",
      "confidence": 0.85,
      "status": "active",
      "evidence_for": [],
      "evidence_against": []
    },
    {
      "id": "A7",
      "text": "Confusion signals can be detected by parsing agent response text for uncertainty markers",
      "confidence": 0.65,
      "status": "needs_validation",
      "evidence_for": [],
      "evidence_against": []
    },
    {
      "id": "A8",
      "text": "Code-puppy user plugins at ~/.code_puppy/plugins/ load correctly with uvx code-puppy",
      "confidence": 0.95,
      "status": "verified",
      "evidence_for": ["E14", "E16"],
      "evidence_against": []
    }
  ],
  
  "hypotheses": [
    {
      "id": "H1",
      "claim": "Multi-entry bootstrap (CLAUDE.md + .cursorrules + .windsurfrules) will work across 3+ agent environments",
      "confidence": 0.90,
      "falsification": "If any major agent environment ignores all bootstrap files, this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-01-10",
      "evidence": ["E7"]
    },
    {
      "id": "H2",
      "claim": "ELCS protocol can be followed by agents without custom tooling (pure file-based)",
      "confidence": 0.95,
      "falsification": "If agents require custom tools/APIs to follow ELCS, this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-01-10",
      "evidence": ["E4"]
    },
    {
      "id": "H3",
      "claim": "WorkToken-based coordination will enable emergent multi-agent collaboration",
      "confidence": 0.85,
      "falsification": "If token claiming leads to deadlocks or no coordination improvement, this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-01-10",
      "evidence": ["E5"]
    },
    {
      "id": "H4",
      "claim": "Validator agents (Stage B) can enforce quality gates without blocking legitimate work",
      "confidence": 0.85,
      "falsification": "If validators cause deadlocks or excessive rejection rates (>30%), this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-01-10",
      "evidence": ["E8"]
    },
    {
      "id": "H5",
      "claim": "Coalition contracts (Stage C) enable tighter agent coupling without conflict",
      "confidence": 0.90,
      "falsification": "If coalitions produce more conflicts than solo agents, or exit conditions fail to trigger, this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-01-10",
      "evidence": ["E9"]
    },
    {
      "id": "H6",
      "claim": "Distance vectors (Stage D) enable self-selection without central dispatcher",
      "confidence": 0.90,
      "falsification": "If agents cannot meaningfully compute/use distance vectors, or coordination degrades without dispatcher, this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-02-09",
      "evidence": ["E10", "E11", "E12", "E19"],
      "notes": "GroceryBrain showed natural agent delegation patterns"
    },
    {
      "id": "H7",
      "claim": "Agents naturally scale rigor to risk without explicit instruction",
      "confidence": 0.80,
      "falsification": "If agents apply same ceremony to trivial and complex tasks, this hypothesis is falsified",
      "status": "validated",
      "validated_at": "2025-01-10",
      "evidence": ["E6"]
    },
    {
      "id": "H8",
      "claim": "Infrastructure-based telemetry (via code-puppy callback hooks) provides sufficient observability for framework validation without requiring agent compliance",
      "confidence": 0.95,
      "falsification": "If the callback hooks fail to capture meaningful events, or if we need agent-initiated logging to understand behavior",
      "status": "validated",
      "validated_at": "2025-01-11",
      "evidence": ["E13", "E14", "E17", "E19"]
    },
    {
      "id": "H9",
      "claim": "Complex, organic test prompts (70-80% defined with mixed requirements/questions/gaps) effectively stress-test agent parsing, prioritization, and ELCS compliance",
      "confidence": 0.90,
      "falsification": "If agents handle complex prompts identically to simple ones, or if complexity doesn't reveal new behaviors",
      "status": "validated",
      "validated_at": "2025-02-09",
      "evidence": ["E19"]
    }
  ],
  
  "evidence": [
    {
      "id": "E1",
      "type": "observation",
      "summary": "Code-puppy and Claude Code both read claude.md/CLAUDE.md files at session start",
      "source": "direct observation during this project"
    },
    {
      "id": "E2",
      "type": "observation", 
      "summary": "EAR template (epistemic-agentic-runtime-main) successfully persists state across sessions via files",
      "source": "current project usage"
    },
    {
      "id": "E3",
      "type": "observation",
      "summary": "EAR 12-stage pipeline has guided this project from idea through scaffolding successfully",
      "source": "current session"
    },
    {
      "id": "E4",
      "type": "experiment",
      "summary": "test-elcs-codepuppy project: Agent followed ELCS protocol (tokens, claims, checkpoints) using only file-based artifacts, no custom tooling",
      "source": "H3 stress test session 2025-01-10"
    },
    {
      "id": "E5",
      "type": "experiment",
      "summary": "test-elcs-codepuppy project: Bernard delegated WT-008 (web server) to python-programmer sub-agent while implementing 3 other tokens in parallel. No conflicts, proper attribution in claimed_by field.",
      "source": "H3 stress test session 2025-01-10"
    },
    {
      "id": "E6",
      "type": "experiment",
      "summary": "Agent created single token for simple work (Stage 1), but voluntarily created 4 parallel tokens + sub-agent delegation for complex multi-feature request (Stage 2). Scaled rigor without explicit instruction.",
      "source": "H3 stress test session 2025-01-10"
    },
    {
      "id": "E7",
      "type": "experiment",
      "summary": "Same ELCS project (test-elcs-codepuppy) successfully read by Code-puppy (AGENTS.md), Claude Code CLI (CLAUDE.md), and VS Code Claude chat mode (CLAUDE.md). All three understood project state, tokens, and checkpoints.",
      "source": "H1 cross-platform validation 2025-01-10"
    },
    {
      "id": "E8",
      "type": "experiment",
      "summary": "After adding HARD RULES section to CLAUDE.md/AGENTS.md with visual checklist, agent followed full token lifecycle for WT-012: created token BEFORE work, ran pre-edit checklist, ran compliance checklist, wrote checkpoint. Key insight: prominent rules get followed, buried rules get skipped.",
      "source": "H4 compliance enforcement test 2025-01-10"
    },
    {
      "id": "E9",
      "type": "experiment",
      "summary": "Coalition CC-001-web-calculator coordinated 6 agents (planning-agent, python-programmer, code-puppy, qa-kitten, python-reviewer, javascript-reviewer) across 4 tokens with 6 explicit handoffs. Validators had blocking power. Scope boundaries respected. Coalition dissolved cleanly. Delivered: Flask backend, HTML/JS frontend, 41 unit tests, 14 E2E tests.",
      "source": "H5 coalition contract test 2025-01-10"
    },
    {
      "id": "E10",
      "type": "observation",
      "summary": "Agent discovered distance vector protocol in PROTOCOL.md but determined it wasn't needed for simple prioritization with obvious severity differences",
      "source": "H6 testing 2025-01-10"
    },
    {
      "id": "E11",
      "type": "observation",
      "summary": "Agent successfully self-selected using intuition: security (CRITICAL) → test (HIGH) → docs (MEDIUM). Formal distance vectors unnecessary for obvious priorities.",
      "source": "H6 testing 2025-01-10"
    },
    {
      "id": "E12",
      "type": "observation",
      "summary": "Protocol First HARD RULE added to bootstrap files. Agent read protocol when prompted but satisficed with simpler approach when priorities were clear.",
      "source": "H6 testing 2025-01-10"
    },
    {
      "id": "E13",
      "type": "observation",
      "summary": "Code-puppy has callback hooks (pre_tool_call, post_tool_call, agent_run_start/end, edit_file, stream_event) that fire automatically without agent compliance",
      "source": "Code inspection of code_puppy/callbacks.py 2025-01-11"
    },
    {
      "id": "E14",
      "type": "observation",
      "summary": "Code-puppy loads user plugins from ~/.code_puppy/plugins/ directory, enabling custom telemetry plugins to work with uvx code-puppy",
      "source": "Code inspection of code_puppy/plugins/__init__.py 2025-01-11"
    },
    {
      "id": "E15",
      "type": "analysis",
      "summary": "Artifact-based telemetry (watching ELCS file changes) is redundant - the artifacts themselves ARE the record. Useful telemetry must capture what ISN'T in artifacts: tool calls, timing, errors, confusion signals",
      "source": "Lens evaluation and discussion 2025-01-11"
    },
    {
      "id": "E16",
      "type": "verification",
      "summary": "Confirmed: plugins.load_plugin_callbacks() runs at module import time in cli_runner.py (line 52), meaning ~/.code_puppy/plugins/ is scanned regardless of how code-puppy is launched (uvx or local). User plugins WILL work with uvx code-puppy.",
      "source": "Code inspection of cli_runner.py 2025-01-11"
    },
    {
      "id": "E17",
      "type": "validation",
      "summary": "Telemetry plugin successfully captures: session lifecycle, tool calls with args/duration, file operations, shell commands, agent delegation, and confusion signals. All via infrastructure hooks without agent compliance.",
      "source": "Live testing with uvx code-puppy 2025-01-11"
    },
    {
      "id": "E18",
      "type": "gap",
      "summary": "Actual API token usage not available in agent_run_end callback. Code-puppy passes only model name in metadata, not pydantic-ai's result.usage(). Estimated tokens can be calculated from response/thinking length (~4 chars = 1 token).",
      "source": "Code inspection of base_agent.py 2025-01-11"
    },
    {
      "id": "E19",
      "type": "validation",
      "summary": "GroceryBrain test case validates core ELCS hypotheses (H6, H8, H9). 9 tokens completed, 160 tests passing, 11+ checkpoints, 4 bugs found and fixed via real-world testing.",
      "source": "Full development session (~8 hours) 2025-02-09"
    }
  ],
  
  "constraints": {
    "hard": [
      {
        "id": "C1",
        "text": "ELCS must work with any agent that can read/write files",
        "rationale": "Tool-agnostic is a core design goal"
      },
      {
        "id": "C2",
        "text": "All ELCS artifacts must be human-readable (no binary formats)",
        "rationale": "Transparency and debuggability"
      },
      {
        "id": "C3",
        "text": "Template must not require installation or dependencies to use",
        "rationale": "Zero-friction adoption"
      },
      {
        "id": "C6",
        "text": "Telemetry must never log secrets, credentials, API keys, or full file contents",
        "rationale": "Safety lens identified this as high-impact security risk"
      }
    ],
    "soft": [
      {
        "id": "C4",
        "text": "Prefer JSON for structured data, Markdown for prose",
        "rationale": "Universal compatibility"
      },
      {
        "id": "C5",
        "text": "Keep bootstrap files under 500 lines",
        "rationale": "Agents more likely to read short files completely"
      }
    ]
  },
  
  "preferences": [
    {
      "id": "P1",
      "text": "Clarity over cleverness",
      "weight": 0.9
    },
    {
      "id": "P2", 
      "text": "Progressive disclosure (simple by default, depth on demand)",
      "weight": 0.8
    },
    {
      "id": "P3",
      "text": "Self-documenting artifacts",
      "weight": 0.7
    }
  ]
}
